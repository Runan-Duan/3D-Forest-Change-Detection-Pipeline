{
    "pipeline": [
        {
            "type": "readers.las",
            "filename": "${INPUT}"
        },
        {
            "type": "filters.assign",
            "assignment": "Classification[:]=0"  // Reset classifications
        },
        {
            "type": "filters.elm",             // The Extended Local Minimum (ELM) filter marks low points as noise
            "threshold": 2.0                       // Larger cells reduce memory
        },
        {
            "type": "filters.outlier",          // Remove outliers
            "method": "statistical",
            "mean_k": 8,                       
            "multiplier": 2.0
        },
        {
            "type": "filters.smrf",            // Ground classification
            "ignore": "Classification[7:7]",   // Ignore existing ground (if any)
            "slope": 0.1,
            "window": 8,                       
            "threshold": 0.45,
            "scalar": 1.2
        },
        {
            "type": "filters.hag_nn"
        },
        {
            "type": "writers.las",
            "filename": "${OUTPUT}",
            "extra_dims": "HeightAboveGround=float32"
        }

    ]
}